<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Dr.&nbsp;Leticia Pablos Robles">
<title>Introduction to tidyverse 1: data manipulation ‚Äì Fundamentals of Linear Models 2025-2026: Workbook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./using_notebooks.html" rel="next">
<link href="./read_data.html" rel="prev">
<link href="./images/Stats_Ling_Cover_1ed.jpg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-485d01fc63b59abcd3ee1bf1e8e2748d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="site_libs/quarto-diagram/mermaid.min.js"></script><script src="site_libs/quarto-diagram/mermaid-init.js"></script><link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
</head>
<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Workgroup1.html">Workgroup 1: Introduction to R and RStudio</a></li><li class="breadcrumb-item"><a href="./tidyverse_intro.html">Introduction to tidyverse 1: data manipulation</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Fundamentals of Linear Models 2025-2026: Workbook</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workbook organization</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./Workgroup1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workgroup 1: Introduction to R and RStudio</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_to_r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">‚úçÔ∏è R Syntax</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./using_libraries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üì¶ Libraries and Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./read_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reading and Saving data in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidyverse_intro.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Introduction to tidyverse 1: data manipulation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./using_notebooks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reproducible research using Scripts and Notebooks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignment1_key.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment #1 - Answer key</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./Workgroup2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workgroup 2: Data Exploration with R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_organization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data organization and transformation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üìäData visualization in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./descriptive_stats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Descriptive Statistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignment2_key.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment #2 Data Exploration with R - Answer Key</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./Workgroup3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workgroup 3: Simple Linear Regression with R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./plot_xy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Plotting relationship between two variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./correlation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Correlation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lm_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Models in R with <em>lm()</em></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignment3_key.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment #3 Linear fitting with R - Answer Key</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./Workgroup4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workgroup 4: Simple Linear Regression II</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_fit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Model output</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_comparison.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model selection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_assumptions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model assumptions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_categorical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Model with Categorical predictors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_reporting1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simple Linear Model reporting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignment4_key.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment #4 - Linear fitting with R II - Answer Key</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./Workgroup5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workgroup 5: Multiple Regression with R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_multiple.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Linear Regression with Categorical predictor with more than two levels</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_posthoc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Post-hoc testing based on Estimated Marginal Means</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_multiple2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Linear Regression with several predictors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignment5_key.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment #5 - An EEG Processing Pipeline - Answer Key</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./Workgroup6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workgroup 6: Multiple Regression with R II</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_interactions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Linear Regression: Interactions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_contrasts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Treatment Coding vs.&nbsp;Sum Coding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_multicollinearity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multicollinearity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignment6_key.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment #6 - An EEG Processing Pipeline II - Answer Key</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#what-is-the-tidyverse" id="toc-what-is-the-tidyverse" class="nav-link active" data-scroll-target="#what-is-the-tidyverse">üåê <strong>What is the tidyverse?</strong></a>
  <ul class="collapse">
<li><a href="#why-use-tidyverse" id="toc-why-use-tidyverse" class="nav-link" data-scroll-target="#why-use-tidyverse"><strong>Why Use tidyverse?</strong></a></li>
  <li><a href="#core-tidyverse-packages" id="toc-core-tidyverse-packages" class="nav-link" data-scroll-target="#core-tidyverse-packages">üì¶ <strong>Core tidyverse Packages</strong></a></li>
  <li><a href="#workflow-using-tidyverse" id="toc-workflow-using-tidyverse" class="nav-link" data-scroll-target="#workflow-using-tidyverse"><strong>Workflow Using tidyverse</strong></a></li>
  </ul>
</li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li>
<a href="#a-grammar-of-data-manipulation" id="toc-a-grammar-of-data-manipulation" class="nav-link" data-scroll-target="#a-grammar-of-data-manipulation">A grammar of data manipulation</a>
  <ul class="collapse">
<li><a href="#selecting-variables-select" id="toc-selecting-variables-select" class="nav-link" data-scroll-target="#selecting-variables-select">Selecting variables: <code>select()</code></a></li>
  <li><a href="#changing-variable-names-rename" id="toc-changing-variable-names-rename" class="nav-link" data-scroll-target="#changing-variable-names-rename">Changing variable names: <code>rename()</code></a></li>
  <li><a href="#moving-variable-position-relocate" id="toc-moving-variable-position-relocate" class="nav-link" data-scroll-target="#moving-variable-position-relocate">Moving variable position: <code>relocate()</code></a></li>
  <li><a href="#selecting-cases-filter" id="toc-selecting-cases-filter" class="nav-link" data-scroll-target="#selecting-cases-filter">Selecting cases: <code>filter()</code></a></li>
  <li><a href="#reordering-cases-arrange" id="toc-reordering-cases-arrange" class="nav-link" data-scroll-target="#reordering-cases-arrange">Reordering cases: <code>arrange()</code></a></li>
  </ul>
</li>
  <li><a href="#pipe-operator-or" id="toc-pipe-operator-or" class="nav-link" data-scroll-target="#pipe-operator-or">Pipe operator (<code>%&gt;%</code> or <code>|&gt;</code> )</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Workgroup1.html">Workgroup 1: Introduction to R and RStudio</a></li><li class="breadcrumb-item"><a href="./tidyverse_intro.html">Introduction to tidyverse 1: data manipulation</a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-tidyverse1" class="quarto-section-identifier">Introduction to tidyverse 1: data manipulation</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="what-is-the-tidyverse" class="level2"><h2 class="anchored" data-anchor-id="what-is-the-tidyverse">üåê <strong>What is the tidyverse?</strong>
</h2>
<hr>
<p>The <strong><code>tidyverse</code></strong> is a collection of R packages designed for <strong>data science</strong>. These packages share an underlying philosophy, grammar, and data structures, making it easier to learn and use them together. Tidyverse simplifies tasks like data manipulation, visualization, and modeling.</p>
<p>A full description of the tidyverse packages and functions is available in <a href="https://dplyr.tidyverse.org/" class="uri">https://dplyr.tidyverse.org/</a></p>
<section id="why-use-tidyverse" class="level3"><h3 class="anchored" data-anchor-id="why-use-tidyverse"><strong>Why Use tidyverse?</strong></h3>
<p>Using the functions in tidyverse have a number of advantages versus the use of individual packages or the available base R functions:</p>
<ul>
<li><p>Consistent and readable syntax.</p></li>
<li><p>Pipe operator (<code>%&gt;%</code>) for chaining operations (see later)</p></li>
<li><p>Designed for tidy data principles as described in <span class="citation" data-cites="wickham2024r">Wickham, √áetinkaya-Rundel, and Grolemund (<a href="references.html#ref-wickham2024r" role="doc-biblioref">2024</a>)</span>.</p></li>
<li><p>It has a strong user community and documentation.</p></li>
</ul></section><section id="core-tidyverse-packages" class="level3"><h3 class="anchored" data-anchor-id="core-tidyverse-packages">üì¶ <strong>Core tidyverse Packages</strong>
</h3>
<p>When you install and load the <code>tidyverse</code> package, you get access to the core packages listed in the table below without needing to load them individually</p>
<table class="caption-top table">
<thead><tr class="header">
<th>Package</th>
<th>Usage</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>ggplot2</code></td>
<td>Data visualization</td>
</tr>
<tr class="even">
<td><code>dplyr</code></td>
<td>Data manipulation</td>
</tr>
<tr class="odd">
<td><code>tidyr</code></td>
<td>Data tidying</td>
</tr>
<tr class="even">
<td><code>readr</code></td>
<td>Reading rectangular data (CSV, etc.)</td>
</tr>
<tr class="odd">
<td><code>purrr</code></td>
<td>Functional programming</td>
</tr>
<tr class="even">
<td><code>tibble</code></td>
<td>Modern data frames</td>
</tr>
<tr class="odd">
<td><code>stringr</code></td>
<td>String manipulation</td>
</tr>
<tr class="even">
<td><code>forcats</code></td>
<td>Working with categorical data (factors)</td>
</tr>
</tbody>
</table>
<p>We have already seen <code>readr</code> when loading files. We will explore today the <code>tidyr</code> functions.</p>
</section><section id="workflow-using-tidyverse" class="level3"><h3 class="anchored" data-anchor-id="workflow-using-tidyverse"><strong>Workflow Using tidyverse</strong></h3>
<p>A generic workflow using tidyverse can be represented as follows:</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"></figure><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  load["Load tidyverse"]
  read["Read data"]
  clean["Clean and transform data"]
  plot["Visualize"]
  load --&gt; read
  read --&gt; clean
  clean --&gt; plot
</pre>
</div>
<p></p>
</div>
</div>
</div>
<p>This flow result in a code as the following example:</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>You are not expected to understand all the code below now. We will explain different elements during the course. It is just intended as an example of the workflow.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Load tidyverse</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tibble' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'purrr' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ
‚úî dplyr     1.1.4     ‚úî readr     2.1.4
‚úî forcats   1.0.0     ‚úî stringr   1.5.1
‚úî ggplot2   3.5.2     ‚úî tibble    3.3.0
‚úî lubridate 1.9.3     ‚úî tidyr     1.3.1
‚úî purrr     1.0.4     
‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ
‚úñ dplyr::filter() masks stats::filter()
‚úñ dplyr::lag()    masks stats::lag()
‚Ñπ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Read data</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"./data/ELP_full_length_frequency.csv"</span>, show_col_types <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># filter, clean and transform data</span></span>
<span></span>
<span><span class="va">cleandata</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">length</span><span class="op">&gt;</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rt_per_character <span class="op">=</span> <span class="va">RT</span> <span class="op">/</span> <span class="va">length</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">cleandata</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Log10Freq</span>, y <span class="op">=</span> <span class="va">RT</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">'grey'</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="tidyverse_intro_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="section" class="level2"><h2 class="anchored" data-anchor-id="section"></h2>
</section><section id="a-grammar-of-data-manipulation" class="level2"><h2 class="anchored" data-anchor-id="a-grammar-of-data-manipulation">A grammar of data manipulation</h2>
<hr>
<p><code>dplyr</code> is a package within the <code>tidyverse</code> set of functions that allow to manipulate data. You can think of the functions in the package as a sort of ‚Äú<em>grammar of data manipulation</em>‚Äù, providing a consistent set of verbs that help you solve the most common data manipulation challenges:</p>
<ul>
<li><p><a href="https://dplyr.tidyverse.org/reference/mutate.html"><code>mutate()</code></a> adds new variables that are functions of existing variables -&gt; operates on columns.</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/relocate.html"><code>relocate()</code></a>: moves variables to a different position (change order of columns) -&gt; operates on columns.</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/select.html"><code>select()</code></a> picks variables based on their names. -&gt; operates on columns.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code>: change variable names -&gt; operates on columns</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/arrange.html"><code>arrange()</code></a> changes the ordering of the rows. -&gt; operates on rows.</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/filter.html"><code>filter()</code></a> picks cases based on their values. -&gt; operates on rows.</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/summarise.html"><code>summarise()</code></a> reduces multiple values down to a single summary (we will look at this in next workgroup).</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You will see that the functions in <code>tidyverse</code> libraries return a so called <code>tibble</code> . The details are beyond the scope of this course, but you can think of a tibble as a version of a data frame.</p>
</div>
</div>
<p>Let‚Äôs explore how to use the functions above with another of the datasets contained in the <code>languageR</code> package by <span class="citation" data-cites="Baayen_2008">Baayen (<a href="references.html#ref-Baayen_2008" role="doc-biblioref">2008</a>)</span>. We will use the <code>DurationsOnt</code> dataset that contains durational measurement of the Dutch prefix <em>-ont</em> from a study on a Spoken Dutch Corpus ( <span class="citation" data-cites="pluymaekers2005lexical">Pluymaekers, Ernestus, and Baayen (<a href="references.html#ref-pluymaekers2005lexical" role="doc-biblioref">2005</a>)</span>).</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#load library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">languageR</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'languageR' was built under R version 4.3.3</code></pre>
</div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#load dataset in the environment</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"durationsOnt"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#display the structure of the dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">durationsOnt</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   102 obs. of  12 variables:
 $ Word                 : Factor w/ 102 levels "ontbeten","ontbijt",..: 1 2 3 4 5 6 7 8 9 10 ...
 $ Frequency            : num  3.09 4.84 0 3.76 1.95 ...
 $ Speaker              : Factor w/ 63 levels "N01001","N01002",..: 44 15 53 55 46 42 25 25 63 4 ...
 $ Sex                  : Factor w/ 2 levels "female","male": 1 1 2 1 2 1 2 2 2 1 ...
 $ YearOfBirth          : num  72 80 52 60 74 70 76 76 76 66 ...
 $ DurationOfPrefix     : num  0.113 0.1 0.14 0.161 0.161 ...
 $ DurationPrefixVowel  : num  0.0695 0.0354 0.0474 0.0959 0.064 ...
 $ DurationPrefixNasal  : num  0.0439 0.0651 0.0925 0.0648 0.0973 ...
 $ DurationPrefixPlosive: num  0 0 0 0 0 0 0 0 0 0 ...
 $ NumberOfSegmentsOnset: int  1 1 1 1 1 1 1 1 2 2 ...
 $ PlosivePresent       : Factor w/ 2 levels "no","yes": 1 1 1 1 1 1 1 1 1 1 ...
 $ SpeechRate           : num  3.92 6.88 3.53 5.39 6.73 ...</code></pre>
</div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#look at the description of the variables</span></span>
<span><span class="op">?</span><span class="va">durationsOnt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="selecting-variables-select" class="level3"><h3 class="anchored" data-anchor-id="selecting-variables-select">Selecting variables: <code>select()</code>
</h3>
<hr>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> allows to choose a subset of variables (columns of interest). The function call includes as first parameter the dataset followed by the list of columns you would like to keep.</p>
<p>For this example we would like to look only at the duration of the Prefix in seconds and are not interested in the other variables.</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_simplified</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">durationsOnt</span>,  <span class="va">Word</span>, <span class="va">Frequency</span>, <span class="va">Speaker</span>, <span class="va">Sex</span>, <span class="va">YearOfBirth</span>, <span class="va">DurationOfPrefix</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">durationsOnt_simplified</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Word Frequency Speaker    Sex YearOfBirth DurationOfPrefix
24       ontbeten 3.0910425  N01143 female          72         0.113372
58        ontbijt 4.8441871  N01041 female          80         0.100478
40  ontbijtbuffet 0.0000000  N01157   male          52         0.139806
42      ontbijten 3.7612001  N01162 female          60         0.160739
60      ontbijtje 1.9459101  N01145   male          74         0.161283
21 ontbijtservies 0.6931472  N01134 female          70         0.176658</code></pre>
</div>
</div>
<p>The new dataframe <code>durationsOnt_simplified</code> contains now only the columns we specified.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you have many columns, there is a simpler way to specify ‚Äú<em>keep from column X to column Y</em>‚Äù without having to list each one of the individually by using <code>:</code> as in the example below that provides the same result. Of course this does not work if you want to select non-contiguous columns.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_simplified</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">durationsOnt</span>,  <span class="va">Word</span><span class="op">:</span><span class="va">DurationOfPrefix</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">durationsOnt_simplified</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Word Frequency Speaker    Sex YearOfBirth DurationOfPrefix
24       ontbeten 3.0910425  N01143 female          72         0.113372
58        ontbijt 4.8441871  N01041 female          80         0.100478
40  ontbijtbuffet 0.0000000  N01157   male          52         0.139806
42      ontbijten 3.7612001  N01162 female          60         0.160739
60      ontbijtje 1.9459101  N01145   male          74         0.161283
21 ontbijtservies 0.6931472  N01134 female          70         0.176658</code></pre>
</div>
</div>
</section><section id="changing-variable-names-rename" class="level3"><h3 class="anchored" data-anchor-id="changing-variable-names-rename">Changing variable names: <code>rename()</code>
</h3>
<hr>
<p>You can change the naming of the variable using rename as follows - You call the function with as first parameter the dataset and after with the list of variables to be renamed.\</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that you write first the new name and then the old one.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_simplified_renamed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="va">durationsOnt_simplified</span>, Gender <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">durationsOnt_simplified_renamed</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Word Frequency Speaker Gender YearOfBirth DurationOfPrefix
24       ontbeten 3.0910425  N01143 female          72         0.113372
58        ontbijt 4.8441871  N01041 female          80         0.100478
40  ontbijtbuffet 0.0000000  N01157   male          52         0.139806
42      ontbijten 3.7612001  N01162 female          60         0.160739
60      ontbijtje 1.9459101  N01145   male          74         0.161283
21 ontbijtservies 0.6931472  N01134 female          70         0.176658</code></pre>
</div>
</div>
</section><section id="moving-variable-position-relocate" class="level3"><h3 class="anchored" data-anchor-id="moving-variable-position-relocate">Moving variable position: <code>relocate()</code>
</h3>
<hr>
<p>With big datasets including many variables (columns), sometimes it is useful to change the order of the columns. This can be done with the <code><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate()</a></code> function.</p>
<p>You call the function providing again as first parameter the dataset and then the column you want to move. By default the function will move the column specified to become the first. Let‚Äôs say that we want to have the S<em>peaker Identifier</em> as the first column, we will use the following:</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_reordered</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">durationsOnt_simplified_renamed</span>, <span class="va">Speaker</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">durationsOnt_reordered</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Speaker           Word Frequency Gender YearOfBirth DurationOfPrefix
24  N01143       ontbeten 3.0910425 female          72         0.113372
58  N01041        ontbijt 4.8441871 female          80         0.100478
40  N01157  ontbijtbuffet 0.0000000   male          52         0.139806
42  N01162      ontbijten 3.7612001 female          60         0.160739
60  N01145      ontbijtje 1.9459101   male          74         0.161283
21  N01134 ontbijtservies 0.6931472 female          70         0.176658</code></pre>
</div>
</div>
<p>The Speaker variable is now the first. If we want to define a specific location, we can use the arguments <code>.after</code> or <code>.before</code> . For instance, if we want to move the Gender to be just after the Speaker column we will call the following:</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_reordered</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">durationsOnt_reordered</span>, <span class="va">Gender</span>, .after <span class="op">=</span> <span class="va">Speaker</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">durationsOnt_reordered</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Speaker Gender           Word Frequency YearOfBirth DurationOfPrefix
24  N01143 female       ontbeten 3.0910425          72         0.113372
58  N01041 female        ontbijt 4.8441871          80         0.100478
40  N01157   male  ontbijtbuffet 0.0000000          52         0.139806
42  N01162 female      ontbijten 3.7612001          60         0.160739
60  N01145   male      ontbijtje 1.9459101          74         0.161283
21  N01134 female ontbijtservies 0.6931472          70         0.176658</code></pre>
</div>
</div>
<p>Now that we have selected the variables that we want and in the order that we want them, let‚Äôs filter the data to select some cases</p>
</section><section id="selecting-cases-filter" class="level3"><h3 class="anchored" data-anchor-id="selecting-cases-filter">Selecting cases: <code>filter()</code>
</h3>
<hr>
<p>We can select cases or observations based on a criteria using the <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> function. The filter function is called providing as a first parameter the dataset, followed by a <em>condition</em> or criteria to use for the selection.</p>
<p>Let‚Äôs say that we want to make an analysis on the duration of people born after 1970</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_reordered_filtered_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">durationsOnt_reordered</span>,<span class="va">YearOfBirth</span> <span class="op">&gt;</span> <span class="fl">70</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#check on the minimum value of the Year of Birth with the function min()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">durationsOnt_reordered</span><span class="op">$</span><span class="va">YearOfBirth</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23</code></pre>
</div>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">durationsOnt_reordered_filtered_age</span><span class="op">$</span><span class="va">YearOfBirth</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 71</code></pre>
</div>
</div>
<p>As you can see on the example, the <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> selected the cases based on the condition specified.</p>
<p>If we wanted to select for example only the cases for Females, we will have used the filter as <code>Gender == "female"</code> . What about if we want to select the females born after 1970 in a single step? You can combine conditions using the operators <code>&amp;</code> (meaning ‚Äúand‚Äù ) and <code>|</code> (meaning ‚Äúor‚Äù). For example:</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_reordered_filtered_age_gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">durationsOnt_reordered</span>,<span class="op">(</span><span class="va">YearOfBirth</span> <span class="op">&gt;</span> <span class="fl">70</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">Gender</span><span class="op">==</span><span class="st">"female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">durationsOnt_reordered_filtered_age_gender</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Speaker Gender      Word Frequency YearOfBirth DurationOfPrefix
24  N01143 female  ontbeten  3.091042          72         0.113372
58  N01041 female   ontbijt  4.844187          80         0.100478
46  N01103 female   onthoud  3.433987          77         0.168078
43  N01089 female  onthulde  2.079442          75         0.165369
55  N01065 female onthullen  1.945910          78         0.185638
78  N01096 female  ontkende  2.833213          78         0.186745</code></pre>
</div>
</div>
</section><section id="reordering-cases-arrange" class="level3"><h3 class="anchored" data-anchor-id="reordering-cases-arrange">Reordering cases: <code>arrange()</code>
</h3>
<p>Finally, the <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> function orders the dataset by a selected value. For example to order the dataframe by Frequency:</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_reordered_filtered_age_gender_ordered</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">durationsOnt_reordered_filtered_age_gender</span>, <span class="va">Frequency</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">durationsOnt_reordered_filtered_age_gender_ordered</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Speaker Gender             Word Frequency YearOfBirth DurationOfPrefix
102  N01037 female ontstekingsvocht 0.0000000          81         0.099240
20   N01051 female       ontmaskerd 0.6931472          79         0.190070
93   N01171 female    ontploffingen 1.3862944          76         0.114520
32   N01051 female      ontmaskeren 1.6094379          79         0.143948
88   N01110 female        ontvoeren 1.6094379          77         0.098185
55   N01065 female        onthullen 1.9459101          78         0.185638</code></pre>
</div>
</div>
<p>What about if we want to use a <strong>reverse order</strong>? This can be done use the <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code> modified on the variable to be used:</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_reordered_filtered_age_gender_ordered</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">durationsOnt_reordered_filtered_age_gender</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Frequency</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">durationsOnt_reordered_filtered_age_gender_ordered</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Speaker Gender        Word Frequency YearOfBirth DurationOfPrefix
71  N01041 female    ontstaan  6.068426          80         0.205519
31  N01212 female     ontmoet  5.087596          83         0.119349
58  N01041 female     ontbijt  4.844187          80         0.100478
89  N01041 female  ontspannen  4.672829          80         0.143707
12  N01090 female    ontstond  4.574711          76         0.127984
11  N01092 female ontzettende  4.189655          80         0.117997</code></pre>
</div>
</div>
</section></section><section id="pipe-operator-or" class="level2"><h2 class="anchored" data-anchor-id="pipe-operator-or">Pipe operator (<code>%&gt;%</code> or <code>|&gt;</code> )</h2>
<hr>
<p>As you can see, in all the examples above we pass as first argument to the function the dataframe on which we want to make the operation.</p>
<p>Putting all the calls before together :</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_simplified</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">durationsOnt</span>,  <span class="va">Word</span><span class="op">:</span><span class="va">DurationOfPrefix</span><span class="op">)</span></span>
<span><span class="va">durationsOnt_simplified_renamed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="va">durationsOnt_simplified</span>, Gender <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span></span>
<span><span class="va">durationsOnt_reordered</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">durationsOnt_simplified_renamed</span>, <span class="va">Speaker</span><span class="op">)</span></span>
<span><span class="va">durationsOnt_reordered_filtered_age_gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">durationsOnt_reordered</span>,<span class="op">(</span><span class="va">YearOfBirth</span> <span class="op">&gt;</span> <span class="fl">70</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">Gender</span><span class="op">==</span><span class="st">"female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">durationsOnt_reordered_filtered_age_gender_ordered</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">durationsOnt_reordered_filtered_age_gender</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Frequency</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this examples I created on every step a new variable with a different name to save the output of the functions, which created a lot of new variables. This might be useful only in cases when you want to save the intermediate steps. In reality this is rarely the case since anyway you can always execute again the complete flow if you want to change something, and it is a better practice.</p>
<p>That being the case, we could just use on variable for example called <em><code>durationsOnt_processed</code></em> that we overwrite in every step, resulting in something like this:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_processed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">durationsOnt</span>,  <span class="va">Word</span><span class="op">:</span><span class="va">DurationOfPrefix</span><span class="op">)</span></span>
<span><span class="va">durationsOnt_processed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="va">durationsOnt_processed</span>, Gender <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span></span>
<span><span class="va">durationsOnt_processed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">durationsOnt_processed</span>, <span class="va">Speaker</span><span class="op">)</span></span>
<span><span class="va">durationsOnt_processed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">durationsOnt_processed</span>,<span class="op">(</span><span class="va">YearOfBirth</span> <span class="op">&gt;</span> <span class="fl">70</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">Gender</span><span class="op">==</span><span class="st">"female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">durationsOnt_processed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">durationsOnt_processed</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Frequency</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this process though, still everytime the output of the one call is the input for the next step (in the end it is an analysis <em>workflow</em>).</p>
<p>If we were to write textually what we did to the data would be something like:</p>
<blockquote class="blockquote">
<p>‚ÄúTake the durationsOnt dataset <strong>then</strong></p>
<p>Select columns ‚Ä¶ <strong>then</strong></p>
<p><strong>rename</strong> column Sex to Gender <strong>then</strong></p>
<p>move column Speaker to the first column <strong>then</strong></p>
<p>move column Gender after Speaker <strong>then</strong></p>
<p>select cases of Females born after 1970 <strong>then</strong></p>
<p>arrange by frequency in descending order.‚Äù</p>
</blockquote>
<p>This is where the concept of a <strong><em>pipe</em></strong> was introduced in R. The pipe operator allows you to&nbsp;<strong>pass the result of one function directly into the next function</strong>&nbsp;as its first argument, without the need to explicitly write it. It‚Äôs widely used in the&nbsp;<strong>tidyverse</strong>, especially with&nbsp;<code>dplyr</code>.</p>
<p>The operator can be used with two syntax <code>%&gt;%</code> or the new <code>|&gt;</code> .</p>
<p>Using this, the examples before could be executed as below.</p>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">durationsOnt_processed</span> <span class="op">&lt;-</span> <span class="va">durationsOnt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Word</span><span class="op">:</span><span class="va">DurationOfPrefix</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>Gender <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">Speaker</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">Gender</span>, .after <span class="op">=</span> <span class="va">Speaker</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">(</span><span class="va">YearOfBirth</span> <span class="op">&gt;</span> <span class="fl">70</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">Gender</span><span class="op">==</span><span class="st">"female"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Frequency</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">durationsOnt_processed</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Speaker Gender        Word Frequency YearOfBirth DurationOfPrefix
71  N01041 female    ontstaan  6.068426          80         0.205519
31  N01212 female     ontmoet  5.087596          83         0.119349
58  N01041 female     ontbijt  4.844187          80         0.100478
89  N01041 female  ontspannen  4.672829          80         0.143707
12  N01090 female    ontstond  4.574711          76         0.127984
11  N01092 female ontzettende  4.189655          80         0.117997</code></pre>
</div>
</div>
<p>As you can see, the result is the case, but the code and data processing flow is much more readable, and there is no need to introduce intermediate variables.</p>
<p>You will become more familiar along the course with the basic usage of the tidyverse data manipulation.s</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Baayen_2008" class="csl-entry" role="listitem">
Baayen, R. H. 2008. <em>Analyzing Linguistic Data: A Practical Introduction to Statistics Using r</em>. Cambridge University Press.
</div>
<div id="ref-pluymaekers2005lexical" class="csl-entry" role="listitem">
Pluymaekers, Mark, Mirjam Ernestus, and R Harald Baayen. 2005. <span>‚ÄúLexical Frequency and Acoustic Reduction in Spoken Dutch.‚Äù</span> <em>The Journal of the Acoustical Society of America</em> 118 (4): 2561‚Äì69.
</div>
<div id="ref-wickham2024r" class="csl-entry" role="listitem">
Wickham, Hadley, Mine √áetinkaya-Rundel, and Garrett Grolemund. 2024. <em>R for Data Science</em>. O‚ÄôReilly.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./read_data.html" class="pagination-link" aria-label="Reading and Saving data in R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Reading and Saving data in R</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./using_notebooks.html" class="pagination-link" aria-label="Reproducible research using Scripts and Notebooks">
        <span class="nav-page-text">Reproducible research using Scripts and Notebooks</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Fundamentals of Linear Models Workbook was written by Dr.&nbsp;Leticia Pablos Robles</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This workbook was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>